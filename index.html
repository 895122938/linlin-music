<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>凜凜蝶凜的翻唱曲库</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
</head>
<body>
    <!-- 主题切换按钮 -->
    <button class="theme-toggle" id="themeToggle" title="切换主题">
        <i class="fas fa-sun light-icon"></i>
        <i class="fas fa-moon dark-icon"></i>
    </button>

    <!-- 音乐播放器 -->
    <div class="music-player">
        <audio id="bgMusic" loop>
            <source src="好想好想.mp3" type="audio/mp3">
        </audio>
        <div class="music-controls">
            <button id="musicToggle" class="music-toggle" title="背景音乐">
                <i class="fas fa-music music-icon playing"></i>
                <i class="fas fa-volume-mute music-icon paused"></i>
            </button>
            <div class="volume-control">
                <input type="range" id="volumeSlider" class="volume-slider" min="0" max="100" value="30">
            </div>
        </div>
    </div>

    <!-- 原有内容保持不变 -->
    <div class="container">
        <!-- ... 其他内容保持不变 ... -->
    </div>

    <script>
        // 主题切换
        document.getElementById('themeToggle').addEventListener('click', function() {
            document.documentElement.setAttribute('data-theme', 
                document.documentElement.getAttribute('data-theme') === 'light' ? 'dark' : 'light'
            );
        });

        // 音乐播放控制
        document.addEventListener('DOMContentLoaded', function() {
            const audio = document.getElementById('bgMusic');
            const musicToggle = document.getElementById('musicToggle');
            const volumeSlider = document.getElementById('volumeSlider');
            let isPlaying = false;

            // 设置初始音量
            audio.volume = volumeSlider.value / 100;

            // 音量控制
            volumeSlider.addEventListener('input', function() {
                audio.volume = this.value / 100;
            });

            // 播放控制
            musicToggle.addEventListener('click', function() {
                if (isPlaying) {
                    audio.pause();
                    musicToggle.classList.remove('is-playing');
                } else {
                    audio.play().catch(() => {
                        // 处理浏览器的自动播放限制
                        musicToggle.classList.remove('is-playing');
                    });
                    musicToggle.classList.add('is-playing');
                }
                isPlaying = !isPlaying;
            });

            // 页面可见性变化处理
            document.addEventListener('visibilitychange', function() {
                if (document.hidden && isPlaying) {
                    audio.pause();
                    musicToggle.classList.remove('is-playing');
                    isPlaying = false;
                }
            });

            // 尝试自动播放
            audio.play().catch(() => {
                musicToggle.classList.remove('is-playing');
            });
        });
    </script>
</body>
</html>
